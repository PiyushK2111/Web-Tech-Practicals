<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Event Listeners</title>
    <style>
        body{ 
            font-family: Arial, sans-serif; 
            margin: 40px; 
            line-height: 1.6; 
        }
        .demo-section{ 
            border: 1px solid #ddd; 
            padding: 20px; 
            margin: 20px 0; 
            border-radius: 8px; 
        }
        button{ 
            padding: 10px 16px; 
            margin: 5px; 
            cursor: pointer; 
            border: none; 
            border-radius: 4px; 
            font-weight: bold; 
        }
        .add-btn{ 
            background: #28a745; 
            color: white; 
        }
        .remove-btn{ 
            background: #dc3545; 
            color: white; 
        }
        .interactive-box{
            width: 200px; 
            height: 150px; 
            margin: 15px 0;
            border: 2px solid #007bff; 
            border-radius: 8px;
            display: flex; 
            align-items: center; 
            justify-content: center;
            cursor: pointer; 
            transition: all 0.3s ease; 
            font-size: 18px;
            user-select: none;
        }
        .active{ 
            background: #007bff; 
            color: white; 
            transform: scale(1.05); 
        }
        .clicked{ 
            background: #28a745; 
        }
        .hovered{ 
            border-color: #ffc107;
            box-shadow: 0 4px 12px rgba(0,123,255,0.3); 
        }
        #log{ 
            background: #f8f9fa; 
            padding: 15px; 
            height: 200px; 
            overflow-y: auto; 
            font-family: monospace; 
            font-size: 14px; 
        }
        input{ 
            padding: 8px; 
            margin: 5px; 
            border: 1px solid #ccc; 
            border-radius: 4px; 
        }
    </style>
</head>
<body>
    <h1>Event Listeners Demo (addEventListener/removeEventListener)</h1>
    <div class="demo-section">
        <h2>1. Mouse Events</h2>
        <button class="add-btn" onclick="addMouseListeners()">Add Mouse Events</button>
        <button class="remove-btn" onclick="removeMouseListeners()">Remove Mouse Events</button>
        <div id="mouse-box" class="interactive-box">Click/Hover me!</div>
    </div>
    <div class="demo-section">
        <h2>2. Keyboard Events</h2>
        <input type="text" id="key-input" placeholder="Type here... (events active)">
        <div id="key-status">Press keys to see events</div>
        <button class="add-btn" onclick="addKeyListeners()">Add Keyboard Events</button>
        <button class="remove-btn" onclick="removeKeyListeners()">Remove Keyboard Events</button>
    </div>
    <div class="demo-section">
        <h2>3. Event Log</h2>
        <div id="log"></div>
    </div>
    <script>
        const mouseHandlers = {
            click: function(e) {
                this.classList.toggle('clicked');
                logEvent('click', e.target.id, `Button: ${e.button}`);
            },
            mouseover: function(e) {
                this.classList.add('hovered');
                logEvent('mouseover', e.target.id);
            },
            mouseout: function(e) {
                this.classList.remove('hovered');
                logEvent('mouseout', e.target.id);
            },
            mousedown: function(e) {
                this.classList.add('active');
                logEvent('mousedown', e.target.id);
            },
            mouseup: function(e) {
                this.classList.remove('active');
                logEvent('mouseup', e.target.id);
            }
        };
        const keyHandlers = {
            keydown: function(e) {
                document.getElementById('key-status').textContent = `Key: ${e.key} (Code: ${e.code})`;
                logEvent('keydown', e.target.id, e.key);
            },
            keyup: function(e) {
                document.getElementById('key-status').textContent += ` â†‘ Released`;
                logEvent('keyup', e.target.id, e.key);
            },
            input: function(e) {
                logEvent('input', e.target.id, e.target.value.slice(-1));
            }
        };
        let mouseListeners = [];
        const mouseBox = document.getElementById('mouse-box');
        let keyListeners = [];
        const keyInput = document.getElementById('key-input');
        function addMouseListeners() {
            mouseListeners = [
                { type: 'click', handler: mouseHandlers.click.bind(mouseBox) },
                { type: 'mouseover', handler: mouseHandlers.mouseover.bind(mouseBox) },
                { type: 'mouseout', handler: mouseHandlers.mouseout.bind(mouseBox) },
                { type: 'mousedown', handler: mouseHandlers.mousedown.bind(mouseBox) },
                { type: 'mouseup', handler: mouseHandlers.mouseup.bind(mouseBox) }
            ];
            mouseListeners.forEach(({ type, handler }) => {
                mouseBox.addEventListener(type, handler);
            });
            logEvent('system', 'mouse-box', 'Mouse listeners added');
        }
        function removeMouseListeners() {
            mouseListeners.forEach(({ type, handler }) => {
                mouseBox.removeEventListener(type, handler);
            });
            mouseListeners = [];
            mouseBox.className = 'interactive-box'; // Reset classes
            logEvent('system', 'mouse-box', 'Mouse listeners removed');
        }
        function addKeyListeners() {
            keyListeners = [
                { type: 'keydown', handler: keyHandlers.keydown },
                { type: 'keyup', handler: keyHandlers.keyup },
                { type: 'input', handler: keyHandlers.input }
            ];
            keyListeners.forEach(({ type, handler }) => {
                keyInput.addEventListener(type, handler);
            });
            logEvent('system', 'key-input', 'Keyboard listeners added');
        }
        function removeKeyListeners() {
            keyListeners.forEach(({ type, handler }) => {
                keyInput.removeEventListener(type, handler);
            });
            keyListeners = [];
            document.getElementById('key-status').textContent = 'Press keys to see events';
            logEvent('system', 'key-input', 'Keyboard listeners removed');
        }
        function logEvent(type, target, detail = '') {
            const log = document.getElementById('log');
            const time = new Date().toLocaleTimeString();
            const entry = `[${time}] ${type.toUpperCase()} on ${target}: ${detail}\n`;
            log.textContent += entry;
            log.scrollTop = log.scrollHeight;
        }
    </script>
</body>
</html>
